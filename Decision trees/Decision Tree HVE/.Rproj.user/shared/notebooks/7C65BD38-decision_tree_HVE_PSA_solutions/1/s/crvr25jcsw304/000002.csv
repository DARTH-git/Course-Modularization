"0","decision_tree_HVE_output <- with(as.list(l_params_all), {"
"0","  "
"0","  # Create vector of weights for each strategy "
"0","  "
"0","  v_w_no_tx  <- c(  p_HVE  *    p_HVE_comp  ,  # HVE, complications"
"0","                    p_HVE  * (1-p_HVE_comp) ,  # HVE, no complications"
"0","                 (1-p_HVE) *    p_OVE_comp  ,  # OVE, complications"
"0","                 (1-p_HVE) * (1-p_OVE_comp))   # OVE, no complications"
"0","  "
"0","  v_w_tx     <- c(  1                          ,  # On treatment"
"0","                    p_HVE  *    p_HVE_comp_tx  ,  # HVE w/tx, complications"
"0","                    p_HVE  * (1-p_HVE_comp_tx) ,  # HVE w/tx, no complications"
"0","                 (1-p_HVE) *    p_OVE_comp_tx  ,  # OVE w/tx, complications"
"0","                 (1-p_HVE) * (1-p_OVE_comp_tx))   # OVE w/tx, no complications"
"0","  "
"0","  v_w_biopsy <- c(  1                                              , # Undergo biopsy"
"0","                    p_biopsy_comp                                  , # biopsy complications"
"0","                 # no biopsy comp., HVE w/tx,  complications"
"0","                 (1-p_biopsy_comp) *    p_HVE  *    p_HVE_comp_tx  ,  "
"0","                 # no biopsy comp., HVE w/tx, no complications"
"0","                 (1-p_biopsy_comp) *    p_HVE  * (1-p_HVE_comp_tx) ,  "
"0","                 # no biopsy comp., OVE, complications"
"0","                 (1-p_biopsy_comp) * (1-p_HVE) *    p_OVE_comp     ,  "
"0","                 # no biopsy comp., OVE, no complications"
"0","                 (1-p_biopsy_comp) * (1-p_HVE) * (1-p_OVE_comp))      "
"0","  "
"0","  # Create vector of outcomes (QALYs) for each strategy "
"0","  "
"0","  v_qaly_no_tx  <- c(q_VE_comp ,  # HVE, complications"
"0","                     q_VE      ,  # HVE, no complications"
"0","                     q_VE_comp ,  # OVE, complications"
"0","                     q_VE)        # OVE, no complications"
"0","  "
"0","  v_qaly_tx     <- c(0      ,     # treatment does not directly add any QALYs "
"0","                     q_VE_comp ,  # HVE, complications"
"0","                     q_VE      ,  # HVE, no complications"
"0","                     q_VE_comp ,  # OVE, complications"
"0","                     q_VE)        # OVE, no complications"
"0","  "
"0","  "
"0","  v_qaly_biopsy <- c(q_loss_biopsy  ,  # loss due to biopsy"
"0","                     q_VE_comp      ,  # biopsy complications"
"0","                     q_VE_comp      ,  # no biopsy comp., HVE w/tx, complications "
"0","                     q_VE           ,  # no biopsy comp., HVE w/tx, no complications"
"0","                     q_VE_comp      ,  # no biopsy comp., OVE, complications"
"0","                     q_VE)             # no biopsy comp., OVE, no complications"
"0","  "
"0","  # Create vector of costs for each strategy "
"0","  "
"0","  v_cost_no_tx  <- c(c_VE_comp ,  # HVE, complications"
"0","                     c_VE      ,  # HVE, no complications"
"0","                     c_VE_comp ,  # OVE, complications"
"0","                     c_VE)        # OVE, no complications"
"0","  "
"0","  v_cost_tx     <- c(c_tx      ,  # cost of treatment"
"0","                     c_VE_comp ,  # HVE, complications"
"0","                     c_VE      ,  # HVE, no complications"
"0","                     c_VE_comp ,  # OVE, complications"
"0","                     c_VE)        # OVE, no complications"
"0","  "
"0","  "
"0","  v_cost_biopsy <- c(c_biopsy         ,  # cost of biopsy procedure"
"0","                     c_VE_comp        ,  # biopsy complications"
"0","                     c_VE_comp + c_tx ,  # no biopsy comp., HVE w/tx, complications "
"0","                     c_VE + c_tx      ,  # no biopsy comp., HVE w/tx, no complications"
"0","                     c_VE_comp        ,  # no biopsy comp., OVE, complications"
"0","                     c_VE)               # no biopsy comp., OVE, no complications"
"0","  "
"0","  # Calculate total utilities for each strategy "
"0","  total_qaly_no_tx  <- v_w_no_tx  %*%  v_qaly_no_tx      "
"0","  total_qaly_tx     <- v_w_tx     %*%  v_qaly_tx"
"0","  total_qaly_biopsy <- v_w_biopsy %*%  v_qaly_biopsy"
"0","  "
"0","  # Calculate total costs for each strategy "
"0","  total_cost_no_tx  <- v_w_no_tx  %*%  v_cost_no_tx    "
"0","  total_cost_tx     <- v_w_tx     %*%  v_cost_tx"
"0","  total_cost_biopsy <- v_w_biopsy %*%  v_cost_biopsy"
"0","  "
"0","  # vector of total QALYs"
"0","  v_total_qaly <- c(total_qaly_no_tx, total_qaly_tx, total_qaly_biopsy) "
"0","  # vector of total costs"
"0","  v_total_cost <- c(total_cost_no_tx, total_cost_tx, total_cost_biopsy) "
"0","  # calculate vector of nmb"
"0","  v_nmb        <- v_total_qaly * wtp - v_total_cost                      "
"0","  "
"0","  # Name outcomes"
"0","  names(v_total_qaly) <- v_names_str  # names for the elements of the total QALYs vector"
"0","  names(v_total_cost) <- v_names_str  # names for the elements of the total cost vector"
"0","  names(v_nmb)        <- v_names_str  # names for the elements of the nmb vector"
"0","  "
"0","  df_output <- data.frame(Strategy =  v_names_str,"
"0","                          Cost     =  v_total_cost,"
"0","                          Effect   =  v_total_qaly,"
"0","                          NMB      =  v_nmb)"
"0","  return(df_output)"
"0","})"
"0",""
"0","# model output"
"0","decision_tree_HVE_output"
