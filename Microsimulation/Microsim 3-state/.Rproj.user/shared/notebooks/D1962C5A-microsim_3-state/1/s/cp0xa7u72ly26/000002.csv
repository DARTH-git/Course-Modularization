"0","Probs <- function(M_t, df_X) { "
"0","  # Arguments:"
"0","    # M_t:  health state occupied at cycle t (character variable)"
"0","    # df_X: data frame with individual characteristics data  "
"0","  # Returns: "
"0","    # transition probabilities for that cycle"
"0","  "
"0","  # create matrix of state transition probabilities"
"0","  m_p_t           <- matrix(0, nrow = n_states, ncol = n_i)  "
"0","  rownames(m_p_t) <-  v_n  # give the state names to the rows"
"0","  "
"0","  # lookup baseline probability and rate of dying based on individual characteristics"
"0","  p_HD_all <- inner_join(df_X, m_p_HD, by = c(""Sex""))"
"0","  p_HD     <- p_HD_all[M_t == ""healthy"", ""p_HD""]"
"0","  "
"0","  # update m_p_t with the appropriate probabilities   "
"0","  # transition probabilities when healthy "
"0","  m_p_t[, M_t == ""healthy""] <- rbind(1 - p_HD - p_HS, p_HS, p_HD)  "
"0","  # transition probabilities when sick "
"0","  m_p_t[, M_t == ""sick""]    <- rbind(0, 1 - p_SD, p_SD)          "
"0","  # transition probabilities when dead"
"0","  m_p_t[, M_t == ""dead""]    <- rbind(0, 0, 1)                         "
"0","  return(t(m_p_t))"
"0","}     "
